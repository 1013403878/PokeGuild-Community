## 漂浮Poke-RPGGuild插件指南(Version1.0.9 社区版同商业版共版)

- 作者

  > 漂浮

- 唯一认证QQ

  > 739975004
  
- 官方Wiki

  > https://dev.tencent.com/s/0dc8ee1d-1cb2-42f3-a681-4291f7e7ad89

[TOC]

## 全版本[1.8 — 1.14]支持公告

> 从1.0.9版本过后， 本插件将对所有服务器进行支持，不仅是神奇宝贝服，所以插件正式改名别称为Poke-RPGGuild, 售价正式定价为$23(即160RMB)
>
> 之后开放选择是否启用VV，正在制作原版GUI版本，您的支持就是我的动力
>
> ### 差异栏
>
> #### 原版服务器
>
> > 1.温泉加的经验为玩家自身的经验
> >
> > 2.增加贡献方式
> >
> > - 可设置击杀指定的怪物展示名增加指定战力和玩家贡献
>
> #### 神奇宝贝服务器
>
> > 1.温泉加的经验为玩家队伍里神奇宝贝的经验
> >
> > 2.增加贡献方式
> >
> > - 击败BOSS级别神奇宝贝
> >
> >   > 公会战力 + 5 玩家贡献 + 5



### 常规使用

> 打开方法
>
> - 指令打开(建议放入菜单)
>
> /pokeguild main

### 休闲区

> - 配置方法: 在config.yml下，下面这些是相关温泉的配置文件，入口的世界名一定不能填错，否则无法正常运行插件(建议入口在一个封闭的环境里或者一个独立的世界可以保证玩家不会边游玩变刷经验)
>
> ```yaml
> #休闲区入口  Hot Spring Entrance
> PoorDoor:
>  world: world
>  x: 231
>  y: 86
>  z: -323
> #经验配置 (从上往下识别,如果第一次碰到具有权限的项，就按照该项目来增加经验，如果是神奇宝贝服务器则为其所有背包里的神奇宝贝经验，如果是纯净服务器，则会为玩家增加经验)
> ExpConfig:
>  a1:
>    permission: 'spring.vip1'
>    #每1分钟
>    money: 10
>    exp: 10
>  a2:
>    permission: 'spring.vip2'
>    #每1分钟
>    money: 20
>    exp: 20
>  a3:
>    permission: 'spring.vip3'
>    #每1分钟
>    money: 30
>    exp: 30
> ```
>
> - 使用方法: 玩家打开菜单后，选择休闲区，即进入到所设置的休闲区入口中，且每分钟会根据权限组对其的经验或金钱叠加。并且公会等级越高，获得的加成越多。
>   - 叠加详情可在config.yml中查看配置文件LEVELUP下的设置项

### 仓库

> version1.0中， 只支持一个仓库
>
> > 之后版本会更新多个等级存在多个仓库
>
> - 插件配置: 无
> - 使用方法: 玩家直接从公会的仓库界面打开

### 传送

> 无配置
>
> 使用方法
>
> - 管理员: 主菜单 ——> 公会界面 ——> 传送菜单 ——> 编辑
>
> - 公会其他用户: 主菜单 ——> 公会界面 ——> 传送菜单 ——> 使用
>
>   > ![1562863098988](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\1562863098988.png)

### 聊天

> 聊天频道
>
> > ![1562863165394](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\1562863165394.png)

### 管理

<详情看视频，无任何难度和教程，为全GUI操作>

### 外交

<1.0version暂不支持外交>

### 荣誉/战力系统/贡献系统

#### 荣誉商店系统



#### 荣誉获得方式(会陆续更新):

- > 请看差异栏

#### 金钱捐献系统

> - 1.0.6 版本更新
>
>   > 玩家捐献金钱并可按如下配置文件进行比率换算贡献, 而如果玩家单词捐献的结果小于1，比如moneyRate为0.0001 而玩家捐献的金钱为9999及以下时，将不会扣除金钱和操作。该操作不会增加公会战力
>
> config下
>
> ```yacas
> moneyRate: 0.0001
> ```
>
> 

### 职位

> 公会有多种职位
>
> 会长
>
> > - 可以踢出玩家
> > - 可以设置传送点
> > - 可以解散公会
> > - 可以升级公会
> > - 可以设置与其他公会的关系
> > - 可以同意成员加入
> > - 可以修改公告简介信息
>
> 副会长
>
> > - 可以踢出玩家
> > - 可以设置传送点
> > - 可以升级公会
> > - 可以设置与其他公会的关系
> > - 可以同意成员加入
> > - 可以修改公告简介信息
>
> 管理员
>
> > - 可以踢出玩家
> > - 可以设置传送点
> > - 可以设置与其他公会的关系
> > - 可以同意成员加入
>
> 外交大使
>
> > - 可以设置与其他公会的关系
>
> 哨兵
>
> > - 可以设置传送点
>
> 面试官
>
> > - 可以同意成员加入
>
> 普通成员
>
> > - 可以划水摸鱼

### 据点

##### 据点显示方式已更新，拉到下面的特效系统可查看效果，可在配置文件修改位置及内容

- 配置教程

  > 极其简单，跟着下面的步骤走
  >
  > - step.1    首先在插件目录下找到points.yml文件并用Notepad++（或其他文本）打开
  > - step.2    可以看到如下代码片段
  >
  > ```yaml
  > #据点配置
  > points:
  > a1:
  >  name: '碧海核心'
  >  world: 'world'
  >  x: 892
  >  y: 67
  >  z: -163
  >  guild: ''
  >  level: 1
  > ```
  >
  > 其中,如果要新建一个据点就把a1及下面所有内容复制粘贴并把a1改成a2或其他
  >
  > #### 据点地址与名称
  >
  > 据点之间的名字一定不能重名否则会发生错误，世界名不能填写错误，如果错误也会发生异常情况，配置好过后，开服将在这个坐标生成一个信标，而这个信标就是核心，是攻击占领时的标志物。
  >
  > ![1562603350411](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\1562603350411.png)
  >
  > #### 所属公会
  >
  > guild配置项是数据，表面当前占领这个据点的公会是哪一个公会，不可轻易修改！
  >
  > #### 占领限制
  >
  > 每个公会的等级决定了这个公会对据点的最多占有数量，可在config.yml中配置，资源加成效果可以叠加
  >
  > #### 据点等级
  >
  > 据点有三种等级（可以自己新增但要按照格式，但不推荐新增），可以分别在points.yml设置据点等级每分钟的产量资源
  >
  > - level: 1 小型据点
  > - level: 2 中型据点
  > - level: 3 大型据点

- 使用教程

  > - 占领教程
  >
  > 只要破坏一次信标就可以扣除20点值，而每个等级的据点有不同的最大血量，血量扣除完毕该据点将会被对本核心造成伤害最大的公会占领
  >
  > ![1562746884764](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\1562746884764.png)
  >
  > 开放的时间是服主自己设置的！

### 据点BUFF系统

正在加急开发

### 权限系统

> - 休闲区相关
>
>   > - spring.go                    进入休闲区
>   > - spring.leave               离开休闲区
>
> - 公会相关
>
> - 基础使用权限: pokeguild.user
>
>   > pokeguild.main         打开主菜单
>   >
>   > pokeguild.create       创建公会
>   >
>   > pokeguild.seen                 打开某公会的聊天菜单[管理员偷窥用]
>   >
>   > pokeguild.congiveuser    以某个玩家的名义增加公会的荣誉
>   >
>   > pokeguild.congiveguild    给某个公会直接增加一定数量的荣誉
>   >
>   > pokeguild.mongive 给某个公会增加一定数量的金钱
>   >
>   > pokeguild.seen  偷看某个公会的聊天栏
>   >
>   > pokeguild.cbc    公会管理员们能修改公告的权限
>   >
>   > pokeguild.ci       公会管理员们能修改简介的权限
>   >
>   > pokeguild.mongiveuser 让某个玩家减少自己的金钱让公会增加金钱并按比例换算

最后调试日志

已知BUG:

- 聊天室内打字会被别人发来的消息关闭的BUG

  > 修复结果， 尝试后发现，VV的SL不支持动态更新，且作者羊羊说会在下一版本为我实现一个setText()的方法，故此BUG调整延后解决。

### 公会会员伤害系统

> 可在配置文件PointPVP中设置是否允许公会会员之间的伤害

### 公会等级系统

- 配置文件

```YAML
  lv1:
    #升级所需的金钱以及荣誉,荣誉不会减少
    needMoney: 10000
    #升级所需的战力值
    needBattlePower: 2000
    #休闲区附加经验值以及金钱
    addExp: 2
    addMoney: 5
    #最大人数限制
    maxPerson: 5
    #最大据点数量限制
    limitPoint: 3
  lv2:
    needMoney: 50000
    needBattlePower: 8000
    addExp: 10
    addMoney: 10
    maxPerson: 10
    limitPoint: 3
```

### 物品系统

- 1.0.8已增加物品系统，检测方式为Lore全局检测，Lore全部符合则算作该物品

- 使用方式大全（可跳过本部分，这里只是一个对照表）:

  - ```
    LEFT_CLICK_BLOCK（左键点击方块）,
    RIGHT_CLICK_BLOCK（右键点击方块）,
    LEFT_CLICK_AIR (左键点击空气),
    RIGHT_CLICK_AIR （右键点击空气）,
    PHYSICAL （物理交互）;
    RIGHT_CLICK_PLAYER (右键与玩家交互)
    ```



### 指令系统

> - 控制台指令
>
>   > pokeguild reload                             重载配置文件
>   >
>   > pokeguild delete [公会]                  删除某公会
>   >
>   > pokeguild open [player]                为某玩家打开公会菜单
>   >
>   > pokeguild congiveuser [玩家] [数量]    以某个玩家的名义增加公会的荣誉
>   >
>   > pokeguild congiveguild [玩家] [数量]    给某个公会直接增加一定数量的荣誉
>   >
>   > pokeguild mongive [公会] [数量]  给某个公会增加一定数量的金钱
>   >
>   > pokeguild mongiveuser [玩家] [数量] 让某个玩家减少自己的金钱让公会增加金钱并按比例换算
>
> - 玩家指令(1.0.6+ 必给权限PokeGuild.use, 每一个有关pokeguild的指令都需要pokeguild.指令的权限在能执行)
>
>   > spring go                                    进入休闲区
>   >
>   > spring leave                               离开休闲区
>   >
>   > pokeguild main                         打开主菜单
>   >
>   > pokeguild create                       打开创建公会菜单
>   >
>   > pokeguild seen [公会]                 打开某公会的聊天菜单[管理员偷窥用]
>   >
>   > pokeguild congiveuser [玩家] [数量]    以某个玩家的名义增加公会的荣誉
>   >
>   > pokeguild congiveguild [玩家] [数量]    给某个公会直接增加一定数量的荣誉
>   >
>   > pokeguild mongive [公会] [数量]  给某个公会增加一定数量的金钱
>   >
>   > pokeguild seen [公会] 偷看某个公会的聊天栏
>   >
>   > pokeguild mongiveuser [玩家] [数量] 让某个玩家减少自己的金钱让公会增加金钱并按比例换算

### QQ机器人系统

目前内置版本已存在机器人代码， 但为了安全起见， 在找到安全的加密方法前不会公开使用

将会内置权限组系统

version 1.0.6已具有

发送消息

- 据点列表
- /看据点 据点
- 公会列表
- /看公会 公会
- 服务器状态
- 开关
- 执行指令

预计1.2版本前会开放

- QQ绑定系统
- 通过绑定的QQ执行公会操作

### 变量

> 公会相关变量
>
> - %pg_guildname% 获得玩家所在公会名
> - %pg_guildjob% 获得玩家在所在公会名中的职位
> - %pg_guildcontribution% 获得玩家的贡献
> - %pg_guildowner% 获得玩家所在公会的会长
> - %pg_guildperson% 获得当前公会的人数
> - %pg_guildmaxperson% 获得当前公会的最大人数
> - %pg_guildmaxperson% 获得当前公会的等级
> - %pg_guildmoney% 获得所在公会资金

### 开放GUI配置

暂时只开放自由配置公会成员列表，其他的日后更新

config.yml下 其中括号内的是变量

```yaml
Gui:
  #成员列表
  memberGui:
    GuiButtonColorOnline: '§2'       #在线的按钮颜色
    GuiButtonColorOffline: '§f'      #不在线的按钮颜色
    Info:
    - ""
    - "        §b❀ §f玩家    §3[玩家名]                             "
    - ""
    - "        §b❀ §f状态    §3[在线状态]                           "
    - "" 
    - "        §b❀ §f官职    §3[职位]                               "
    - ""
    - "        §b❀ §f贡献    §3[贡献]                               "
    - ""
    - "        §b❀ §f封禁    §3[封禁状态]                           "
```

配置由俟河之清提供

![1564336597416](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\1564336597416.png)

### 特效系统

目前已增加特效系统，据点存在特效且可更改，可在配置文件config.yml的底部找到配置项。

![1565619660136](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\1565619660136.png)

### 新版预告

> version1.1完成前将更新
>
> - mysql数据库支持
> - 据点血量保持(重启不影响血量变化)以及新增血量恢复物品
> - 将会增加更多获得公会荣誉及贡献的方法
> - 增加公会荣誉商城
> - 增加公会支取金钱选项
> - 完善公会外交系统(1.0version虽然写好但暂不开放)

## 详细更新记录

1.0.9

- 已开启对Mythicmob、 BetonQuest 等插件的支持。
- 已开启版本识别区分功能
- 已开启群机器人开关功能 （社区版暂不提供软件）
- 多语言支持！开启对页面绝大多数文字的更改途径，已官方支持中文、英文版
- 成功支持1.8 - 1.14 所有版本
- 更改部分源码，让能耗再次降低一个等级，比同级别的插件优化50%+
- 新增屏幕上方据点战开启/和平模式的文字配置以及位置配置
- 更新特效粒子系统
- 多语言演示（支持修改99%的文本，默认含有中文、英文、日文）: 图片暂不提供
